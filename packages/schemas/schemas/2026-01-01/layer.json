{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://schema.open-form.dev/2026-01-01/layer.json",
  "id": "Layer",
  "oneOf": [
    {
      "type": "object",
      "properties": {
        "mimeType": {
          "description": "MIME type of the layer content (e.g., text/markdown, application/pdf)",
          "type": "string",
          "minLength": 1,
          "maxLength": 100
        },
        "title": {
          "description": "Human-readable title for this layer",
          "type": "string",
          "minLength": 1,
          "maxLength": 200
        },
        "description": {
          "description": "Description of what this layer represents",
          "type": "string",
          "minLength": 1,
          "maxLength": 2000
        },
        "checksum": {
          "description": "SHA-256 checksum for integrity verification",
          "type": "string",
          "minLength": 1,
          "maxLength": 100,
          "pattern": "^sha256:[a-f0-9]{64}$"
        },
        "bindings": {
          "description": "Mapping from form field names to template target identifiers",
          "type": "object",
          "propertyNames": {
            "description": "Form field name (semantic identifier)",
            "type": "string",
            "minLength": 1,
            "maxLength": 100
          },
          "additionalProperties": {
            "description": "Target identifier in the template",
            "type": "string",
            "minLength": 1,
            "maxLength": 500
          }
        },
        "kind": {
          "type": "string",
          "const": "inline"
        },
        "text": {
          "description": "Layer content with interpolation placeholders (e.g., {{fieldName}})",
          "type": "string",
          "minLength": 1,
          "maxLength": 1000000
        }
      },
      "required": [
        "mimeType",
        "kind",
        "text"
      ],
      "additionalProperties": false
    },
    {
      "type": "object",
      "properties": {
        "mimeType": {
          "description": "MIME type of the layer content (e.g., text/markdown, application/pdf)",
          "type": "string",
          "minLength": 1,
          "maxLength": 100
        },
        "title": {
          "description": "Human-readable title for this layer",
          "type": "string",
          "minLength": 1,
          "maxLength": 200
        },
        "description": {
          "description": "Description of what this layer represents",
          "type": "string",
          "minLength": 1,
          "maxLength": 2000
        },
        "checksum": {
          "description": "SHA-256 checksum for integrity verification",
          "type": "string",
          "minLength": 1,
          "maxLength": 100,
          "pattern": "^sha256:[a-f0-9]{64}$"
        },
        "bindings": {
          "description": "Mapping from form field names to template target identifiers",
          "type": "object",
          "propertyNames": {
            "description": "Form field name (semantic identifier)",
            "type": "string",
            "minLength": 1,
            "maxLength": 100
          },
          "additionalProperties": {
            "description": "Target identifier in the template",
            "type": "string",
            "minLength": 1,
            "maxLength": 500
          }
        },
        "kind": {
          "type": "string",
          "const": "file"
        },
        "path": {
          "description": "Absolute path from repo root to the layer file",
          "type": "string",
          "minLength": 1,
          "maxLength": 1000
        }
      },
      "required": [
        "mimeType",
        "kind",
        "path"
      ],
      "additionalProperties": false
    }
  ],
  "title": "Layer"
}